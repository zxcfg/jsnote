<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>测试</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <style>
        *{margin:0; padding: 0;}
        #main{width:500px;height:400px;position:relative;border:4px solid red;margin:0 auto;}
        #box{width: 50px; height: 50px; background: green; position: absolute;}
    </style>
</head>
<body>
<div id="main">
    <div id="box"></div>
</div>
</body>
<script>
    var box=document.getElementById('box');
    var time=null;
    var clientW=main.clientWidth-box.offsetWidth;
    var clientH=main.clientHeight-box.offsetHeight;
    var t=false,r=false,b=false,l=false;//标记按键
    setInterval(test,10);
    function test() {
        if (b) {
            box.style.top=box.offsetTop+5+'px';
            if(box.offsetTop>clientH){
                box.style.top=clientH+'px';
            }
        }
        if (l) {
            box.style.left=box.offsetLeft-5+'px';
            if(box.offsetLeft<0){
                box.style.left=0+'px';
            }
        }
        if (t) {
            box.style.top=box.offsetTop-5+'px';
            if(box.offsetTop<0){
                box.style.top=0+'px';
            }
        }
        if (r) {
            box.style.left=box.offsetLeft+5+'px';
            if(box.offsetLeft>clientW){
                box.style.left=clientW+'px';
            }
        }
    }
    document.onkeydown=function (event) {
        var ev=event||window.event;
        var keycode=ev.keyCode||ev.which;
        if(keycode==37){
            l=true;
        }else if(keycode==38){
            t=true;
        }else if(keycode==39){
            r=true;
        }else if(keycode==40){
            b=true;
        }
    };
    document.onkeyup=function (event) {
        var ev=event||window.event;
        var keycode=ev.keyCode||ev.which;
        if(keycode==37){
            l=false;
        }else if(keycode==38){
            t=false;
        }else if(keycode==39){
            r=false;
        }else if(keycode==40){
            b=false;
        }
    }
</script>
</html>
